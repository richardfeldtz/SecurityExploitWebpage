
app.controller('sqlCtrl', function($scope) {
    $scope.user = ["Josh", "abc123", "Richard", "ABC123", "Mike", "246BDS"];
    $scope.age=["Josh", 22, "Richard", 22, "Mike", 45];
    $scope.location = ["Josh", "Columbus", "Richard", "Columbus", "Mike", "Middle of nowhere"];



    $scope.submit = function(username, password) {
        // use username and password to query the database
        var ind = password.indexOf(";");
        if(ind != -1){
            var sqlStat = password.substring(ind);
            if(sqlStat.indexOf("SELECT") != -1){
                ind = sqlStat.indexOf("FROM");
                sqlStat = sqlStat.substring(ind+4);
                sqlStat.trim();
                if(sqlStat == "user"){
                    return $scope.user.toString();
                }
                if(sqlStat == "age"){
                    return $scope.age.toString();
                }
                if(sqlStat == "location"){
                    return $scope.location.toString();
                }
                else{
                    return "ERROR!";
                }
            }
            if(sqlStat.indexOf("DROP TABLE") != -1){
                ind = sqlStat.indexOf("DROP TABLE");
                sqlStat = sqlStat.substring(ind+10);
                sqlStat.trim();
                if(sqlStat == "user"){
                    return "TABLE USER DROPPED";
                }
                if(sqlStat == "age"){
                    return "TABLE AGE DROPPED";
                }
                if(sqlStat == "location"){
                    return "TABLE LOCATION DROPPED" ;
                }
                else{
                    return "ERROR!";
                }

            }

        }
        $scope.user.push(username, password);

        $scope.username = null;
        $scope.password = null;
    }

});

